<canvas id="myCanvas" width="400" height="400" style="border:1px solid;"></canvas>
<br>

<p>Your score is:</p>
<p id="score_value">--</p>
<p>Your life is:</p>
<p id="life_value">--</p>
<p>randomxs_2:</p>
<p id="randomxs_2_value">--</p>





<script>

    //----------------------------------------------------
    function TimeEventHandler_s() {



        if (rundomxs_2 == 1)
            stonex += 20
        if (rundomxs_2 == 2)
            stonex -= 20
        if (rundomxs_2 == 3)
            stoney += 20
        if (rundomxs_2 == 0)
            stoney -= 20


        if (stoney > 380)
            stoney = 0
        if (stoney < 0)
            stoney = 380
        if (stonex > 380)
            stonex = 0
        if (stonex < 0)
            stonex = 380


    }

    function keyDownEventHandler() {

        document.getElementById("life_value").innerHTML = life;

        if (event.keyCode == 40)
            direction = 'down';

        if (event.keyCode == 38)
            direction = 'up';

        if (event.keyCode == 37)
            direction = 'left';

        if (event.keyCode == 39)
            direction = 'right';
    }
    function TimeEventHandler_s2() {
        rundomxs_2 = Math.floor(Math.random(1) * 4);
        document.getElementById("randomxs_2_value").innerHTML = rundomxs_2;
    }

    function TimeEventHandler() {
        //clean
        ctx.fillStyle = 'white';
        ctx.fillRect(0, 0, 400, 400);

        if (direction == 'down')
            y += 20

        if (direction == 'up')
            y -= 20
        if (direction == 'left')
            x -= 20

        if (direction == 'right')
            x += 20


        if (y > 380)
            direction = 'up';

        if (y < 0)
            direction = 'down';
        if (x > 380)
            direction = 'left';
        if (x < 0)
            direction = 'right';




        if (x == applex && y == appley) {
            score += 1;
            document.getElementById("score_value").innerHTML = score;
            rundomx = Math.floor(Math.random() * 380);
            rundomy = Math.floor(Math.random() * 380);

            applex = rundomx - rundomx % 20;
            appley = rundomy - rundomy % 20;

            rundomxs = Math.floor(Math.random() * 380 - rundomxs % 20);
            rundomys = Math.floor(Math.random() * 380 - rundomys % 20);




        }
        if (x == stonex && y == stoney ||x == stonex- 20 && direction == "left" && rundomx == 1 || x == stonex + 20 &&
            direction == "righg" && 2||y == stoney- 20 && direction == "down" && rundomx == 0 || y == stoney + 20 &&
            direction == "down" && 3 ) {
            life -= 1;
            if (life == 0)
                life = "game over"

            document.getElementById("life_value").innerHTML = life;

        }





        //draw rectangular 
        ctx.fillStyle = "black";
        ctx.fillRect(x, y, 20, 20);

        ctx.fillStyle = "red";
        ctx.fillRect(applex, appley, 20, 20);

        ctx.fillStyle = "blue";
        ctx.fillRect(stonex, stoney, 20, 20);

        ctx.fillStyle = "blue";
        ctx.fillRect(stonex2, stoney2, 20, 20);







    }
    function score() {

        if (score <= 5 && score < 10) {
            time = time + 50;
            level = level + 1;
            document = score;



        }

    }

    //----------------------------------------------------
    var rundomxs_2 = 0
    var rundomx = 0;
    var rundomy = 0;
    var rundomxs = 0;
    var rundomys = 0;


    canvas = document.getElementById('myCanvas');
    ctx = canvas.getContext('2d');
    var x = 40;
    var y = 40;
    var applex = 100;
    var appley = 20;
    var stonex = 20;
    var stoney = 80;
    var level = 1;
    var level_text = "שלב  ";
    var direction = 'right';

    var score = 0;
    var life = 3;
    var time = 350;
    document.onkeydown = keyDownEventHandler;



    setInterval(TimeEventHandler, time);
    setInterval(TimeEventHandler_s, time + 50);
    setInterval(TimeEventHandler_s2, 1700);
    win_level = window.alert(level_text + level);
    document.write(win_level);
    document = score;








</script>